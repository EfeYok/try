<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karaman Express - Otob√ºs Bileti</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .calendar-day {
            transition: all 0.2s;
        }

        .calendar-day:hover:not(.disabled):not(.selected) {
            transform: scale(1.05);
            background-color: #eff6ff;
        }

        .calendar-day.selected {
            background-color: #2563eb;
            color: white;
            font-weight: bold;
        }

        .calendar-day.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .calendar-day.today {
            border: 2px solid #2563eb;
        }
    </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-blue-900 via-blue-600 to-blue-400">
    <!-- Header -->
    <div class="bg-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <svg class="w-10 h-10 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                    <h1 class="text-2xl font-bold text-gray-800">Karaman Express</h1>
                </div>
                <div class="text-sm text-gray-600">
                    üìû 0555 555 55 55
                </div>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <div class="container mx-auto px-4 py-12">
        <div class="text-center mb-8">
            <h2 class="text-4xl font-bold text-white mb-3">G√ºvenli ve Konforlu Yolculuk</h2>
            <p class="text-blue-100 text-lg">T√ºrkiye'nin d√∂rt bir yanƒ±na ekonomik ve hƒ±zlƒ± ula≈üƒ±m</p>
        </div>

        <!-- Bilet Arama Formu -->
        <div class="max-w-4xl mx-auto">
            <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8">
                <!-- Tek Y√∂n Ba≈ülƒ±k -->
                <div class="flex items-center gap-2 mb-6 pb-4 border-b border-gray-200">
                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M14 5l7 7m0 0l-7 7m7-7H3" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800">Tek Y√∂n</h3>
                </div>

                <!-- Form -->
                <div class="space-y-6">
                    <!-- Nereden - Nereye -->
                    <div class="grid md:grid-cols-2 gap-4">
                        <!-- Nereden -->
                        <div class="relative">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <svg class="w-4 h-4 inline mr-1 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd"
                                        d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                                        clip-rule="evenodd" />
                                </svg>
                                Nereden
                            </label>
                            <select id="from-city"
                                class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-600 text-gray-800 font-medium bg-white">
                                <option value="">Kalkƒ±≈ü ≈üehri se√ßin</option>
                                <option value="Adana">Adana</option>
                                <option value="Ankara">Ankara</option>
                                <option value="Eski≈üehir">Eski≈üehir</option>
                                <option value="ƒ∞stanbul">ƒ∞stanbul</option>
                                <option value="ƒ∞zmir">ƒ∞zmir</option>
                                <option value="Karaman">Karaman</option>
                                <option value="Konya">Konya</option>
                                <option value="Samsun">Samsun</option>
                                <option value="Tokat">Tokat</option>
                            </select>
                        </div>

                        <!-- Nereye -->
                        <div class="relative">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <svg class="w-4 h-4 inline mr-1 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd"
                                        d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                                        clip-rule="evenodd" />
                                </svg>
                                Nereye
                            </label>
                            <select id="to-city"
                                class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-600 text-gray-800 font-medium bg-white">
                                <option value="">Varƒ±≈ü ≈üehri se√ßin</option>
                                <option value="Adana">Adana</option>
                                <option value="Ankara">Ankara</option>
                                <option value="Eski≈üehir">Eski≈üehir</option>
                                <option value="ƒ∞stanbul">ƒ∞stanbul</option>
                                <option value="ƒ∞zmir">ƒ∞zmir</option>
                                <option value="Karaman">Karaman</option>
                                <option value="Konya">Konya</option>
                                <option value="Samsun">Samsun</option>
                                <option value="Tokat">Tokat</option>
                            </select>
                        </div>
                    </div>

                    <!-- Yer Deƒüi≈ütir Butonu -->
                    <div class="flex justify-center -my-3">
                        <button onclick="swapCities()"
                            class="bg-gray-100 hover:bg-blue-600 hover:text-white p-3 rounded-full shadow-md transition-all transform hover:scale-110">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4" />
                            </svg>
                        </button>
                    </div>

                    <!-- Takvim -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center justify-between">
                            <span>
                                <svg class="w-4 h-4 inline mr-1 text-blue-600" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                Gidi≈ü Tarihi
                            </span>
                            <span class="text-xs text-gray-500 font-normal" id="selected-date-text"></span>
                        </label>

                        <!-- Takvim Ba≈ülƒ±k -->
                        <div
                            class="bg-gray-50 rounded-t-lg p-3 flex items-center justify-between border-2 border-b-0 border-gray-300">
                            <button onclick="previousMonth()" class="p-2 hover:bg-gray-200 rounded-lg transition">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 19l-7-7 7-7" />
                                </svg>
                            </button>
                            <div class="text-center">
                                <div class="font-bold text-gray-800" id="calendar-month-year"></div>
                            </div>
                            <button onclick="nextMonth()" class="p-2 hover:bg-gray-200 rounded-lg transition">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 5l7 7-7 7" />
                                </svg>
                            </button>
                        </div>

                        <!-- Takvim Grid -->
                        <div class="border-2 border-gray-300 rounded-b-lg p-4 bg-white">
                            <!-- G√ºnler -->
                            <div class="grid grid-cols-7 gap-2 mb-2">
                                <div class="text-center text-xs font-semibold text-gray-600 py-2">Pzt</div>
                                <div class="text-center text-xs font-semibold text-gray-600 py-2">Sal</div>
                                <div class="text-center text-xs font-semibold text-gray-600 py-2">√áar</div>
                                <div class="text-center text-xs font-semibold text-gray-600 py-2">Per</div>
                                <div class="text-center text-xs font-semibold text-gray-600 py-2">Cum</div>
                                <div class="text-center text-xs font-semibold text-blue-600 py-2">Cmt</div>
                                <div class="text-center text-xs font-semibold text-blue-600 py-2">Paz</div>
                            </div>
                            <!-- Tarihler -->
                            <div id="calendar-days" class="grid grid-cols-7 gap-2"></div>
                        </div>
                    </div>

                    <!-- Yolcu Sayƒ±sƒ± -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <svg class="w-4 h-4 inline mr-1 text-blue-600" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                            </svg>
                            Yolcu Sayƒ±sƒ±
                        </label>
                        <select id="passenger-count"
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-600 text-gray-800 font-medium bg-white">
                            <option value="1">1 Yolcu</option>
                            <option value="2">2 Yolcu</option>
                            <option value="3">3 Yolcu</option>
                            <option value="4">4 Yolcu</option>
                        </select>
                        <p class="text-xs text-gray-500 mt-1">Maksimum 4 ki≈üi i√ßin bilet alabilirsiniz</p>
                    </div>

                    <!-- Arama Butonu -->
                    <button onclick="searchTrips()"
                        class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 px-6 rounded-lg font-bold text-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                        Sefer Ara
                    </button>
                </div>
            </div>
        </div>

        <!-- Pop√ºler G√ºzergahlar -->
        <div class="max-w-6xl mx-auto mt-12">
            <h3 class="text-2xl font-bold text-white mb-6 text-center">Pop√ºler G√ºzergahlar</h3>
            <div class="grid md:grid-cols-3 lg:grid-cols-4 gap-4">
                <button onclick="quickSearch('ƒ∞stanbul', 'Ankara')"
                    class="bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white p-4 rounded-lg transition-all border border-white/30">
                    <div class="font-bold text-lg mb-1">ƒ∞stanbul ‚Üí Ankara</div>
                    <div class="text-sm text-blue-100">400 ‚Ç∫'den ba≈ülayan fiyatlarla</div>
                </button>
                <button onclick="quickSearch('Ankara', 'ƒ∞zmir')"
                    class="bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white p-4 rounded-lg transition-all border border-white/30">
                    <div class="font-bold text-lg mb-1">Ankara ‚Üí ƒ∞zmir</div>
                    <div class="text-sm text-blue-100">450 ‚Ç∫'den ba≈ülayan fiyatlarla</div>
                </button>
                <button onclick="quickSearch('Karaman', 'ƒ∞stanbul')"
                    class="bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white p-4 rounded-lg transition-all border border-white/30">
                    <div class="font-bold text-lg mb-1">Karaman ‚Üí ƒ∞stanbul</div>
                    <div class="text-sm text-blue-100">500 ‚Ç∫'den ba≈ülayan fiyatlarla</div>
                </button>
                <button onclick="quickSearch('Samsun', 'Ankara')"
                    class="bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white p-4 rounded-lg transition-all border border-white/30">
                    <div class="font-bold text-lg mb-1">Samsun ‚Üí Ankara</div>
                    <div class="text-sm text-blue-100">380 ‚Ç∫'den ba≈ülayan fiyatlarla</div>
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="bg-blue-900/50 backdrop-blur-sm mt-12 py-8">
        <div class="container mx-auto px-4 text-center text-white">
            <p class="mb-2">¬© 2025 Karaman Express - T√ºm haklarƒ± saklƒ±dƒ±r.</p>
            <p class="text-sm text-blue-200">G√ºvenli ve konforlu yolculuk i√ßin bizi tercih edin.</p>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Firebase yapƒ±landƒ±rmasƒ± - BU KISMI KENDƒ∞ FIREBASE CONFIG ƒ∞LE DEƒûƒ∞≈ûTƒ∞Rƒ∞N
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyD7hCepYSGIR9WPbTQQ9UhivBQr9IxQFfc",
            authDomain: "karaman-express.firebaseapp.com",
            projectId: "karaman-express",
            storageBucket: "karaman-express.firebasestorage.app",
            messagingSenderId: "675458442911",
            appId: "1:675458442911:web:ca7d007b71649d0da864aa"  
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Global eri≈üim i√ßin
        window.db = db;
    </script>

    <script>
        let currentDate = new Date();
        let selectedDate = null;
        const months = ['Ocak', '≈ûubat', 'Mart', 'Nisan', 'Mayƒ±s', 'Haziran', 'Temmuz', 'Aƒüustos', 'Eyl√ºl', 'Ekim', 'Kasƒ±m', 'Aralƒ±k'];
        const monthsShort = ['Oca', '≈ûub', 'Mar', 'Nis', 'May', 'Haz', 'Tem', 'Aƒüu', 'Eyl', 'Eki', 'Kas', 'Ara'];

        // Maksimum rezervasyon tarihi (bug√ºnden 1 ay sonra)
        const maxDate = new Date();
        maxDate.setMonth(maxDate.getMonth() + 1);
        maxDate.setHours(23, 59, 59, 999);

        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            document.getElementById('calendar-month-year').textContent = `${months[month]} ${year}`;

            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();

            // Pazartesi = 0, Pazar = 6 olacak ≈üekilde ayarla
            let startingDayOfWeek = firstDay.getDay() - 1;
            if (startingDayOfWeek === -1) startingDayOfWeek = 6;

            const calendarDays = document.getElementById('calendar-days');
            calendarDays.innerHTML = '';

            const today = new Date();
            today.setHours(0, 0, 0, 0);

            // Bo≈ü g√ºnler
            for (let i = 0; i < startingDayOfWeek; i++) {
                const emptyDiv = document.createElement('div');
                calendarDays.appendChild(emptyDiv);
            }

            // G√ºnleri ekle
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                date.setHours(0, 0, 0, 0);

                const dayButton = document.createElement('button');
                dayButton.type = 'button';
                dayButton.className = 'calendar-day p-3 rounded-lg text-center cursor-pointer';
                dayButton.textContent = day;

                // Ge√ßmi≈ü tarihleri veya 1 ay sonrasƒ±nƒ± devre dƒ±≈üƒ± bƒ±rak
                if (date < today || date > maxDate) {
                    dayButton.className += ' disabled bg-gray-100 text-gray-400';
                    dayButton.disabled = true;
                    if (date > maxDate) {
                        dayButton.title = 'Rezervasyon sadece 1 ay √∂ncesinden yapƒ±labilir';
                    }
                } else {
                    dayButton.className += ' bg-white hover:bg-blue-50 text-gray-800';
                }

                // Bug√ºn
                if (date.getTime() === today.getTime()) {
                    dayButton.className += ' today';
                }

                // Se√ßili tarih
                if (selectedDate && date.getTime() === selectedDate.getTime()) {
                    dayButton.className = dayButton.className.replace('bg-white', '').replace('hover:bg-blue-50', '') + ' selected';
                }

                dayButton.onclick = () => selectDate(date, day, month, year);

                calendarDays.appendChild(dayButton);
            }
        }

        function selectDate(date, day, month, year) {
            selectedDate = date;
            const formattedDate = `${day} ${monthsShort[month]} ${year}`;
            document.getElementById('selected-date-text').textContent = formattedDate;
            renderCalendar();
        }

        function previousMonth() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            // Bug√ºn√ºn ayƒ±ndan √∂nceki aya gidemez
            const previousMonth = new Date(currentDate);
            previousMonth.setMonth(previousMonth.getMonth() - 1);

            if (previousMonth.getFullYear() < today.getFullYear() ||
                (previousMonth.getFullYear() === today.getFullYear() && previousMonth.getMonth() < today.getMonth())) {
                return; // Ge√ßmi≈ü aya gitme
            }

            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            const nextMonth = new Date(currentDate);
            nextMonth.setMonth(nextMonth.getMonth() + 1);

            // 1 aydan fazla ileriye gidemez
            if (nextMonth > maxDate) {
                alert('‚ö†Ô∏è Rezervasyon sadece 1 ay √∂ncesinden yapƒ±labilir.');
                return;
            }

            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        function swapCities() {
            const fromCity = document.getElementById('from-city');
            const toCity = document.getElementById('to-city');
            const temp = fromCity.value;
            fromCity.value = toCity.value;
            toCity.value = temp;
        }

        function quickSearch(from, to) {
            document.getElementById('from-city').value = from;
            document.getElementById('to-city').value = to;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function searchTrips() {
            const fromCity = document.getElementById('from-city').value;
            const toCity = document.getElementById('to-city').value;
            const passengerCount = document.getElementById('passenger-count').value;

            if (!fromCity) {
                alert('L√ºtfen kalkƒ±≈ü ≈üehrini se√ßiniz!');
                return;
            }

            if (!toCity) {
                alert('L√ºtfen varƒ±≈ü ≈üehrini se√ßiniz!');
                return;
            }

            if (fromCity === toCity) {
                alert('Kalkƒ±≈ü ve varƒ±≈ü ≈üehirleri aynƒ± olamaz!');
                return;
            }

            if (!selectedDate) {
                alert('L√ºtfen gidi≈ü tarihini se√ßiniz!');
                return;
            }

            const day = selectedDate.getDate();
            const month = selectedDate.getMonth();
            const year = selectedDate.getFullYear();
            const formattedDate = `${day} ${monthsShort[month]} ${year}`;

            // Rota bilgilerini kaydet
            const routeData = {
                from: fromCity,
                to: toCity,
                date: {
                    date: selectedDate.toISOString().split('T')[0],
                    formatted: formattedDate
                },
                passengerCount: passengerCount
            };

            localStorage.setItem('searchData', JSON.stringify(routeData));
            window.location.href = 'sefer-listesi.html';
        }

        // Sayfa y√ºklendiƒüinde takvimi olu≈ütur
        window.onload = function () {
            // Bug√ºn√ºn ayƒ±ndan ba≈üla
            currentDate = new Date();
            renderCalendar();
        };
    </script>
</body>

</html>