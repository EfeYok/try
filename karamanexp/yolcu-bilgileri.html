<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karaman Express - Yolcu Bilgileri</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-gradient-to-br from-blue-900 via-blue-600 to-blue-400">
    <!-- Header -->
    <div class="bg-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <button onclick="window.location.href='koltuk-secimi.html'"
                    class="flex items-center gap-3 hover:opacity-80 transition">
                    <svg class="w-10 h-10 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                    <h1 class="text-2xl font-bold text-gray-800">Karaman Express</h1>
                </button>
                <div class="text-sm text-gray-600">
                    üìû 0555 555 55 55
                </div>
            </div>
        </div>
    </div>

    <!-- Progress Steps -->
    <div class="bg-white/10 backdrop-blur-sm border-b border-white/20">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-center gap-2">
                <div class="flex items-center gap-2">
                    <div
                        class="w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center font-bold text-sm">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                    <span class="text-white text-sm font-medium hidden sm:inline">G√ºzergah</span>
                </div>
                <div class="w-12 h-1 bg-green-500"></div>
                <div class="flex items-center gap-2">
                    <div
                        class="w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center font-bold text-sm">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                    <span class="text-white text-sm font-medium hidden sm:inline">Sefer</span>
                </div>
                <div class="w-12 h-1 bg-green-500"></div>
                <div class="flex items-center gap-2">
                    <div
                        class="w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center font-bold text-sm">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                    <span class="text-white text-sm font-medium hidden sm:inline">Koltuk</span>
                </div>
                <div class="w-12 h-1 bg-blue-400"></div>
                <div class="flex items-center gap-2">
                    <div
                        class="w-8 h-8 rounded-full bg-blue-400 text-white flex items-center justify-center font-bold text-sm">
                        4</div>
                    <span class="text-white text-sm font-medium hidden sm:inline">Bilgiler</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8">
        <div class="max-w-5xl mx-auto">
            <div class="grid lg:grid-cols-3 gap-6">
                <!-- Sol Panel: Form -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Yolcu Bilgileri -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                            <svg class="w-7 h-7 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                            Yolcu Bilgileri
                        </h2>

                        <div id="passenger-form">
                            <!-- JavaScript ile doldurulacak -->
                        </div>
                    </div>

                    <!-- S√∂zle≈üme ve Onay -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">S√∂zle≈üme ve Onay</h3>
                        <div class="space-y-3">
                            <label class="flex items-start gap-3 cursor-pointer group">
                                <input type="checkbox" id="terms-check"
                                    class="mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-600">
                                <span class="text-sm text-gray-700 group-hover:text-gray-900">
                                    <a href="#" class="text-blue-600 hover:underline font-semibold">Mesafeli Satƒ±≈ü
                                        S√∂zle≈ümesi</a>'ni ve
                                    <a href="#" class="text-blue-600 hover:underline font-semibold">Ki≈üisel Verilerin
                                        Korunmasƒ±</a> hakkƒ±ndaki metni okudum, kabul ediyorum.
                                </span>
                            </label>
                            <label class="flex items-start gap-3 cursor-pointer group">
                                <input type="checkbox" id="kvkk-check"
                                    class="mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-600">
                                <span class="text-sm text-gray-700 group-hover:text-gray-900">
                                    Karaman Express'ten kampanya, yenilik ve fƒ±rsatlardan haberdar olmak istiyorum.
                                </span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Saƒü Panel: √ñzet -->
                <div class="space-y-6">
                    <!-- Seyahat √ñzeti -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                            </svg>
                            Seyahat √ñzeti
                        </h3>

                        <div class="space-y-4">
                            <!-- G√ºzergah -->
                            <div class="pb-4 border-b border-gray-200">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-lg font-bold text-gray-800" id="summary-from"></span>
                                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                    </svg>
                                    <span class="text-lg font-bold text-gray-800" id="summary-to"></span>
                                </div>
                                <div class="text-sm text-gray-600" id="summary-distance"></div>
                            </div>

                            <!-- Tarih ve Saat -->
                            <div class="grid grid-cols-2 gap-4 pb-4 border-b border-gray-200">
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Tarih</div>
                                    <div class="text-sm font-semibold text-gray-800" id="summary-date"></div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Kalkƒ±≈ü Saati</div>
                                    <div class="text-sm font-semibold text-gray-800" id="summary-time"></div>
                                </div>
                            </div>

                            <!-- Koltuk ve Otob√ºs -->
                            <div class="grid grid-cols-2 gap-4 pb-4 border-b border-gray-200">
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Koltuk No</div>
                                    <div class="text-2xl font-bold text-blue-600" id="summary-seat"></div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Otob√ºs Tipi</div>
                                    <div class="text-sm font-semibold text-gray-800" id="summary-bustype"></div>
                                </div>
                            </div>

                            <!-- Fiyat -->
                            <div class="pt-2">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-700">Bilet Fiyatƒ±</span>
                                    <span class="text-lg font-bold text-gray-800" id="summary-price"></span>
                                </div>
                                <div class="flex justify-between items-center pt-3 border-t-2 border-gray-300">
                                    <span class="text-lg font-bold text-gray-800">Toplam</span>
                                    <span class="text-3xl font-bold text-green-600" id="summary-total"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- √ñdeme Butonu -->
                    <button onclick="completeBooking()"
                        class="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white py-4 px-6 rounded-xl font-bold text-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        Rezervasyonu Tamamla
                    </button>

                    <!-- G√ºvenli √ñdeme -->
                    <div class="bg-green-50 border-2 border-green-200 rounded-xl p-4">
                        <div class="flex items-start gap-3">
                            <svg class="w-6 h-6 text-green-600 flex-shrink-0" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                            </svg>
                            <div>
                                <div class="font-bold text-green-800 text-sm mb-1">G√ºvenli Rezervasyon</div>
                                <div class="text-xs text-green-700">Bilgileriniz 256-bit SSL sertifikasƒ± ile
                                    korunmaktadƒ±r.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD7hCepYSGIR9WPbTQQ9UhivBQr9IxQFfc",
            authDomain: "karaman-express.firebaseapp.com",
            projectId: "karaman-express",
            storageBucket: "karaman-express.firebasestorage.app",
            messagingSenderId: "675458442911",
            appId: "1:675458442911:web:ca7d007b71649d0da864aa"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.db = db;
        window.firestoreModules = { collection, addDoc, serverTimestamp };
    </script>

    <script>
        const tripData = JSON.parse(localStorage.getItem('selectedTrip'));
        const seatData = JSON.parse(localStorage.getItem('selectedSeatData'));
        const searchData = JSON.parse(localStorage.getItem('searchData'));

        if (!tripData || !seatData || !searchData) {
            window.location.href = 'index.html';
        }

        const passengerCount = seatData.totalPassengers || 1;

        console.log('üìä Y√ºklenen veriler:');
        console.log('Trip Data:', tripData);
        console.log('Seat Data:', seatData);
        console.log('Search Data:', searchData);
        console.log('Yolcu Sayƒ±sƒ±:', passengerCount);

        // √ñzet bilgilerini doldur
        document.getElementById('summary-from').textContent = tripData.from;
        document.getElementById('summary-to').textContent = tripData.to;
        document.getElementById('summary-distance').textContent = `${tripData.distance} ‚Ä¢ ${tripData.duration}`;
        document.getElementById('summary-date').textContent = tripData.date.formatted.split(',')[0];
        document.getElementById('summary-time').textContent = tripData.time;
        document.getElementById('summary-seat').textContent = seatData.seats.map(s => s.seatNumber).join(', ');
        document.getElementById('summary-bustype').textContent = tripData.busType;
        const totalPrice = tripData.price * passengerCount;
        document.getElementById('summary-price').textContent = tripData.price + ' ‚Ç∫ x ' + passengerCount;
        document.getElementById('summary-total').textContent = totalPrice + ' ‚Ç∫';

        // Yolcu formlarƒ±nƒ± olu≈ütur
        const passengerFormsContainer = document.getElementById('passenger-form');
        passengerFormsContainer.innerHTML = '';

        seatData.seats.forEach((seat, index) => {
            const formSection = document.createElement('div');
            formSection.className = 'mb-6 pb-6 border-b border-gray-200 last:border-0';
            formSection.innerHTML = `
                <h4 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                    <span class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm">${index + 1}</span>
                    Yolcu ${index + 1} - Koltuk ${seat.seatNumber} (${seat.gender})
                </h4>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Ad Soyad <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="fullname-${index}" 
                            required 
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-600 text-gray-800 transition"
                            placeholder="Adƒ±nƒ±z ve Soyadƒ±nƒ±z"
                        >
                        <p class="text-xs text-gray-500 mt-1">Kimliƒüinizdeki isim ile aynƒ± olmalƒ±dƒ±r</p>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            TC Kimlik No <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="tcno-${index}" 
                            required 
                            maxlength="11" 
                            pattern="[0-9]{11}"
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-600 text-gray-800 transition"
                            placeholder="12345678901"
                        >
                        <p class="text-xs text-gray-500 mt-1">11 haneli TC Kimlik numaranƒ±z</p>
                    </div>

                    ${index === 0 ? `
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Telefon <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="tel" 
                            id="phone-0" 
                            required
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-600 text-gray-800 transition"
                            placeholder="0555 555 55 55"
                        >
                        <p class="text-xs text-gray-500 mt-1">ƒ∞leti≈üim i√ßin kullanƒ±lacaktƒ±r</p>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            E-posta <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="email" 
                            id="email-0" 
                            required
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-600 text-gray-800 transition"
                            placeholder="ornek@email.com"
                        >
                        <p class="text-xs text-gray-500 mt-1">Biletler bu adrese g√∂nderilecektir</p>
                    </div>
                    ` : ''}

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            Cinsiyet
                        </label>
                        <input 
                            type="text" 
                            id="gender-${index}" 
                            value="${seat.gender}"
                            readonly
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"
                        >
                    </div>
                </div>
            `;
            passengerFormsContainer.appendChild(formSection);

            // Telefon formatƒ± (sadece ilk yolcu i√ßin)
            if (index === 0) {
                document.getElementById('phone-0').addEventListener('input', function (e) {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length > 11) value = value.slice(0, 11);

                    if (value.length >= 4) {
                        value = value.slice(0, 4) + ' ' + value.slice(4);
                    }
                    if (value.length >= 8) {
                        value = value.slice(0, 8) + ' ' + value.slice(8);
                    }
                    if (value.length >= 11) {
                        value = value.slice(0, 11) + ' ' + value.slice(11);
                    }

                    e.target.value = value.trim();
                });
            }

            // TC Kimlik sadece rakam
            document.getElementById(`tcno-${index}`).addEventListener('input', function (e) {
                e.target.value = e.target.value.replace(/\D/g, '');
            });
        });

        async function completeBooking() {
            // T√ºm yolcu bilgilerini topla
            const passengers = [];

            for (let i = 0; i < passengerCount; i++) {
                const fullname = document.getElementById(`fullname-${i}`).value.trim();
                const tcno = document.getElementById(`tcno-${i}`).value.trim();

                // Bo≈ü alan kontrol√º
                if (!fullname || !tcno) {
                    alert(`‚ö†Ô∏è L√ºtfen Yolcu ${i + 1} i√ßin t√ºm zorunlu alanlarƒ± doldurunuz!`);
                    return;
                }

                // Ad Soyad kontrol√º
                const nameParts = fullname.split(' ').filter(part => part.length > 0);
                if (nameParts.length < 2) {
                    alert(`‚ö†Ô∏è Yolcu ${i + 1}: L√ºtfen adƒ± ve soyadƒ± giriniz!`);
                    return;
                }
                if (!/^[a-zA-Zƒü√º≈üƒ±√∂√ßƒû√ú≈ûƒ∞√ñ√á\s]+$/.test(fullname)) {
                    alert(`‚ö†Ô∏è Yolcu ${i + 1}: Ad Soyad sadece harf i√ßermelidir!`);
                    return;
                }

                // TC Kimlik kontrol√º
                if (tcno.length !== 11 || !/^\d+$/.test(tcno)) {
                    alert(`‚ö†Ô∏è Yolcu ${i + 1}: TC Kimlik No 11 haneli rakamlardan olu≈ümalƒ±dƒ±r!`);
                    return;
                }
                if (tcno[0] === '0') {
                    alert(`‚ö†Ô∏è Yolcu ${i + 1}: TC Kimlik No 0 ile ba≈ülayamaz!`);
                    return;
                }

                passengers.push({
                    fullname: fullname,
                    tcno: tcno,
                    seatNumber: seatData.seats[i].seatNumber,
                    gender: seatData.seats[i].gender
                });
            }

            // ƒ∞lk yolcu i√ßin telefon ve email
            const phone = document.getElementById('phone-0').value.trim();
            const email = document.getElementById('email-0').value.trim();

            if (!phone || !email) {
                alert('‚ö†Ô∏è L√ºtfen ileti≈üim bilgilerini doldurunuz!');
                return;
            }

            // E-posta kontrol√º
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('‚ö†Ô∏è Ge√ßerli bir e-posta adresi giriniz!');
                return;
            }

            // Telefon kontrol√º
            const phoneClean = phone.replace(/\s/g, '');
            if (phoneClean.length < 10 || phoneClean.length > 11) {
                alert('‚ö†Ô∏è Ge√ßerli bir telefon numarasƒ± giriniz!\n√ñrnek: 0555 555 55 55');
                return;
            }
            if (!/^0[1-9]\d{9}$/.test(phoneClean)) {
                alert('‚ö†Ô∏è Ge√ßerli bir T√ºrkiye telefon numarasƒ± giriniz!');
                return;
            }

            // S√∂zle≈üme kontrol√º
            const termsCheck = document.getElementById('terms-check').checked;
            if (!termsCheck) {
                alert('‚ö†Ô∏è Devam etmek i√ßin s√∂zle≈ümeleri kabul etmelisiniz!');
                return;
            }

            // Firebase'e kaydet
            try {
                console.log('üîç Firebase baƒülantƒ±sƒ± kontrol ediliyor...');

                // Firebase mod√ºllerini bekle
                let attempts = 0;
                while (!window.firestoreModules && attempts < 20) {
                    console.log('‚è≥ Firebase y√ºkleniyor... (' + (attempts + 1) + '/20)');
                    await new Promise(resolve => setTimeout(resolve, 300));
                    attempts++;
                }

                if (!window.firestoreModules || !window.db) {
                    console.error('‚ùå Firebase baƒülantƒ±sƒ± kurulamadƒ±!');
                    alert('‚ö†Ô∏è Veritabanƒ± baƒülantƒ±sƒ± kurulamadƒ±.\n\nYine de devam etmek ister misiniz? (Rezervasyon kaydedilmeyecek)');
                    // Yine de devam et
                    localStorage.setItem('passengerInfo', JSON.stringify({
                        passengers: passengers,
                        phone: phone,
                        email: email
                    }));
                    window.location.href = 'rezervasyon-onay.html';
                    return;
                }

                console.log('‚úÖ Firebase baƒülantƒ±sƒ± ba≈üarƒ±lƒ±!');

                const { collection, addDoc, serverTimestamp } = window.firestoreModules;

                // PNR kodu (t√ºm yolcular i√ßin aynƒ±)
                const pnrCode = 'KE' + Date.now().toString().slice(-8);

                // Her yolcu i√ßin ayrƒ± kayƒ±t
                console.log(`üíæ ${passengerCount} yolcu i√ßin rezervasyon kaydediliyor...`);

                const promises = passengers.map(async (passenger) => {
                    const reservationData = {
                        // Sefer bilgileri
                        from: tripData.from,
                        to: tripData.to,
                        date: tripData.date.date,
                        time: tripData.time,
                        busType: tripData.busType,

                        // Koltuk bilgisi
                        seatNumber: parseInt(passenger.seatNumber),

                        // Yolcu bilgileri
                        fullname: passenger.fullname,
                        tcno: passenger.tcno,
                        phone: phone,
                        email: email,
                        gender: passenger.gender,

                        // Fiyat
                        price: tripData.price,

                        // Duraklar (varsa)
                        stops: tripData.stops || [],

                        // Zaman damgasƒ±
                        createdAt: serverTimestamp(),

                        // PNR kodu (grup rezervasyon i√ßin aynƒ±)
                        pnr: pnrCode,

                        // Grup bilgisi
                        groupSize: passengerCount
                    };

                    console.log(`  üìù Koltuk ${passenger.seatNumber} - ${passenger.fullname}`);
                    return await addDoc(collection(window.db, 'reservations'), reservationData);
                });

                await Promise.all(promises);

                console.log('‚úÖ T√ºm rezervasyonlar ba≈üarƒ±yla kaydedildi!');
                console.log('üé´ PNR Kodu:', pnrCode);

                // Yolcu bilgilerini localStorage'a kaydet (onay sayfasƒ± i√ßin)
                localStorage.setItem('passengerInfo', JSON.stringify({
                    passengers: passengers,
                    phone: phone,
                    email: email,
                    pnr: pnrCode
                }));

                // Ba≈üarƒ±lƒ± rezervasyon sayfasƒ±na y√∂nlendir
                console.log('‚úÖ Onay sayfasƒ±na y√∂nlendiriliyor...');
                window.location.href = 'rezervasyon-onay.html';

            } catch (error) {
                console.error('‚ùå Firebase kayƒ±t hatasƒ±:', error);
                console.error('Hata kodu:', error.code);
                console.error('Hata mesajƒ±:', error.message);

                let errorMessage = 'Rezervasyon kaydedilirken bir hata olu≈ütu:\n\n';

                if (error.code === 'permission-denied') {
                    errorMessage += 'üîí Yetki hatasƒ±: Firebase Rules ayarlarƒ±nƒ± kontrol edin.';
                } else if (error.code === 'unavailable') {
                    errorMessage += 'üåê Baƒülantƒ± hatasƒ±: ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin.';
                } else {
                    errorMessage += error.message;
                }

                alert('‚ö†Ô∏è ' + errorMessage);
            }
        }
    </script>
</body>

</html>